<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="792px" height="1651px" viewBox="-0.5 -0.5 792 1651" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2023-03-06T09:49:29.373Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36&quot; etag=&quot;x6oSy_YmyFslZ8iF0i2T&quot; version=&quot;20.8.23&quot; type=&quot;onedrive&quot;&gt;&lt;diagram name=&quot;Page-1&quot; id=&quot;OE4x6rIxSNyVvigOLFFL&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="195" y="130" width="95" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 242.5 170 L 242.5 1650" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="242" y="154.5">Client</text></g><rect x="240" y="200" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="237.5" y="310" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="237.5" y="450" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="237.5" y="620" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="237.5" y="1208" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="420" y="130" width="120" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 480 170 L 480 1650" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="479.5" y="154.5">TURN server ("relay")</text></g><rect x="475" y="200" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="475" y="310" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="475" y="450" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="475" y="620" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="260" y="460" width="210" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 208px; height: 1px; padding-top: 467px; margin-left: 262px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: center; font-size: 9px;"><span style="background-color: initial; font-size: 9px;">请求协议类型, 用户名, <font color="#67ab9f">realm, nonce</font>, <font style="font-size: 9px;" color="#3333ff">消息认证码</font></span></div></div></div></div></foreignObject><text x="262" y="476" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="9px">请求协议类型, 用户名, realm, nonce, 消息认证码</text></switch></g><path d="M 250 629.66 L 461.88 629.66" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 629.66 L 461.88 633.16 L 461.88 626.16 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="298" y="614" width="126" height="14" stroke-width="0"/><text x="359.79" y="624.16">allocation refresh request</text></g><path d="M 466.5 690 L 261.62 690" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 254.62 690 L 261.62 686.5 L 261.62 693.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="352" y="675" width="17" height="14" stroke-width="0"/><text x="359.71" y="684.5">rsp</text></g><rect x="475" y="1030" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 255 210 L 461.88 210" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 210 L 461.88 213.5 L 461.88 206.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="342" y="195" width="42" height="14" stroke-width="0"/><text x="361.93" y="204.5">bind req</text></g><rect x="620" y="130" width="100" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 670 170 L 670 1650" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="669.5" y="154.5">Peer</text></g><rect x="277.5" y="240" width="165" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 163px; height: 1px; padding-top: 247px; margin-left: 280px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 11px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;">mapped addr: client 的外网地址</span></div></div></div></foreignObject><text x="280" y="259" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px">mapped addr: client 的外网地址</text></switch></g><path d="M 250 320 L 461.88 320" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 320 L 461.88 323.5 L 461.88 316.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="339" y="305" width="44" height="14" stroke-width="0"/><text x="359.79" y="314.5">alloc req</text></g><path d="M 465 380 L 260.12 380" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 253.12 380 L 260.12 376.5 L 260.12 383.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="338" y="365" width="43" height="14" stroke-width="0"/><text x="358.21" y="374.5">alloc rsp</text></g><rect x="260" y="320" width="200" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 327px; margin-left: 262px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="color: rgb(0, 0, 0); font-family: Helvetica; font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;"> 请求分配relay端口，在turn和peer之间是UDP还是TCP<br />(WebRTC 写死的UDP)<br /></span></div></div></div></foreignObject><text x="262" y="335" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="8px">请求分配relay端口，在turn和peer之间是UDP还是TCP...</text></switch></g><rect x="290" y="380" width="170" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 168px; height: 1px; padding-top: 387px; margin-left: 292px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: center; font-size: 11px;"><span style="background-color: rgb(255, 255, 255); font-size: 11px;">ret=401 未授权, <font color="#67ab9f">realm, nonce</font></span></div></div></div></div></foreignObject><text x="292" y="398" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px">ret=401 未授权, realm, nonce</text></switch></g><rect x="180" y="0" width="160" height="130" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 158px; height: 1px; padding-top: 7px; margin-left: 182px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>pc = new RTCPeerConnection({</div><div>    iceServers: [</div><div>        {</div><div>            urls: "turn:test12.rtc.qq.com",</div><div>            username: "xxxxx",</div><div>            credential: "passxxxxx"</div><div>        }</div><div>    ],</div><div>    iceTransportPolicy: "relay"</div><div>});</div></div></div></div></foreignObject><text x="182" y="16" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="9px">pc = new RTCPeerConnection({...</text></switch></g><path d="M 250 460 L 461.88 460" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 460 L 461.88 463.5 L 461.88 456.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="#FF3333" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="328" y="445" width="65" height="14" stroke-width="0"/><text x="359.79" y="454.5">alloc req 2nd</text></g><path d="M 466.5 510 L 261.62 510" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 254.62 510 L 261.62 506.5 L 261.62 513.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="339" y="495" width="43" height="14" stroke-width="0"/><text x="359.71" y="504.5">alloc rsp</text></g><rect x="270" y="505" width="200" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 198px; height: 1px; padding-top: 512px; margin-left: 272px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: center; font-size: 9px;">分配的relay端口(即资源), 超时时间(默认10分钟);</div><div style="text-align: center; font-size: 9px;">后续需要刷新expire（即<font color="#0000ff">心跳保活</font>）</div></div></div></div></foreignObject><text x="272" y="521" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="9px">分配的relay端口(即资源), 超时时间(默认10分钟);...</text></switch></g><rect x="60" y="1150" width="180" height="60" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 178px; height: 1px; padding-top: 1157px; margin-left: 62px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><span style="font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;">端上指定channel id号<br style="font-size: 8px;" /><br style="font-size: 8px;" />0x0000-0x3FFF: 不能用来作为信道号</span><br style="box-sizing: border-box; outline: 0px; overflow-wrap: break-word; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;" /><span style="font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;">0x4000-0x7FFF: 可以作为信道号的值(16383个)</span><br style="box-sizing: border-box; outline: 0px; overflow-wrap: break-word; font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;" /><span style="font-family: -apple-system, &quot;SF UI Text&quot;, Arial, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, sans-serif, SimHei, SimSun; font-size: 8px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important;">0x8000-0xFFFF: 保留值，留给以后使用</span></div></div></div></foreignObject><text x="62" y="1165" fill="#000000" font-family="Helvetica" font-size="8px">端上指定channel id号...</text></switch></g><rect x="380" y="70" width="200" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 95px; margin-left: 480px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">一个client对应一个allocation(五元组)，<br />含多个channel(channel id标识)，<br />每个channel对应一个peer</div></div></div></foreignObject><text x="480" y="98" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">一个client对应一个allocation(五元组)，...</text></switch></g><path d="M 470 269 L 265.12 269" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 258.12 269 L 265.12 265.5 L 265.12 272.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="30" y="360" width="200" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 385px; margin-left: 130px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;"><font style="font-size: 8px;" face="Courier New"><a style="margin: 0px; padding: 0px; box-sizing: border-box; border-color: var(--border); text-decoration-line: none; text-align: start; font-size: 8px;" data-key="2086" href="https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/p2p/base/turn_port.cc;drc=21553e2e499e3270c060a2fce861de99a49453a2;l=99" class="semantic-decoration">TurnAllocateRequest</a>::<a style="margin: -2px; padding: 0px 1px; box-sizing: border-box; border: 1px solid var(--xref-highlight); background-color: var(--xref-highlight-bg); border-radius: 4px; font-weight: 700; line-height: 0; overflow: visible; text-align: start; font-size: 8px;" data-key="2087" href="https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/p2p/base/turn_port.cc;drc=21553e2e499e3270c060a2fce861de99a49453a2;bpv=1;bpt=1;l=1439?gsn=OnAuthChallenge&amp;gs=kythe%3A%2F%2Fchromium.googlesource.com%2Fchromium%2Fsrc%3Flang%3Dc%252B%252B%3Fpath%3Dthird_party%2Fwebrtc%2Fp2p%2Fbase%2Fturn_port.cc%23To5qFRyFVveEfqaAun9dQz67hn001fo3EKn9FvAYvqM" class="semantic-decoration highlight">OnAuthChallenge</a><br style="font-size: 8px;" /></font><br style="font-size: 8px;" />收到realm后，计算消息认证码<br style="font-size: 8px;" />MD5(username ":" realm ":" SASLprep(password))</div></div></div></foreignObject><text x="130" y="387" fill="#000000" font-family="Helvetica" font-size="8px" text-anchor="middle">TurnAllocateRequest::OnAuthChallenge...</text></switch></g><rect x="491" y="546" width="120" height="50" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 571px; margin-left: 551px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">后台设置allocation timer,<br />bind UDP port,<br />go a.packetHandler(m)</div></div></div></foreignObject><text x="551" y="574" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">后台设置allocation timer,...</text></switch></g><rect x="490" y="420" width="170" height="131" fill="#fff2cc" stroke="#d6b656" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 168px; height: 1px; padding-top: 427px; margin-left: 492px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="font-size: 8px;">type Allocation struct {</div><div style="font-size: 8px;">  RelayAddr           net.Addr</div><div style="font-size: 8px;">  Protocol            Protocol</div><div style="font-size: 8px;">  TurnSocket          net.PacketConn</div><div style="font-size: 8px;">  RelaySocket         net.PacketConn</div><div style="font-size: 8px;">  fiveTuple           *FiveTuple</div><div style="font-size: 8px;">  permissionsLock     sync.RWMutex</div><div style="font-size: 8px;"><font style="font-size: 8px;" color="#ff0000">  permissions         map[string]*Permission</font></div><div style="font-size: 8px;">  channelBindingsLock sync.RWMutex</div><div style="font-size: 8px;"><font style="font-size: 8px;" color="#ff0000">  channelBindings     []*ChannelBind</font></div><div style="font-size: 8px;">  lifetimeTimer       *time.Timer</div><div style="font-size: 8px;">}</div></div></div></div></foreignObject><text x="492" y="435" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="8px">type Allocation struct {...</text></switch></g><rect x="493" y="635" width="100" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 645px; margin-left: 543px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">刷新 allocation timer</div></div></div></foreignObject><text x="543" y="648" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">刷新 allocation timer</text></switch></g><rect x="237.5" y="790" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="475" y="790" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 250 799.66 L 461.88 799.66" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 799.66 L 461.88 803.16 L 461.88 796.16 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="#f90606" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="316" y="784" width="89" height="14" stroke-width="0"/><text x="359.79" y="794.16">create permission</text></g><path d="M 466.5 860 L 261.62 860" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 254.62 860 L 261.62 856.5 L 261.62 863.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="339" y="845" width="43" height="14" stroke-width="0"/><text x="359.71" y="854.5">alloc rsp</text></g><rect x="476" y="790" width="150" height="60" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 820px; margin-left: 551px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">在allocation permission map<br />中增加一项，key是peer addr，<br />增加定时器（超时时间5min），<br />已存在则刷新</div></div></div></foreignObject><text x="551" y="823" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">在allocation permission map...</text></switch></g><rect x="475" y="910" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 250 919.66 L 461.88 919.66" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 919.66 L 461.88 923.16 L 461.88 916.16 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="287" y="904" width="148" height="14" stroke-width="0"/><text x="359.79" y="914.16">send indication with peer addr</text></g><path d="M 493 980 L 520 980 Q 530 980 540 980 L 661.38 980" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 668.38 980 L 661.38 983.5 L 661.38 976.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="483.75" y="910" width="180" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 930px; margin-left: 574px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">查找是否有permission，<br />剥离协议头(36B)，转发原始数据给peer</div></div></div></foreignObject><text x="574" y="933" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">查找是否有permission，...</text></switch></g><path d="M 663.5 1040 L 544 1040 Q 534 1040 524 1040 L 514 1040 Q 504 1040 501.81 1040 L 499.62 1040" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 492.62 1040 L 499.62 1036.5 L 499.62 1043.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 467 1100 L 347.5 1100 Q 337.5 1100 327.5 1100 L 317.5 1100 Q 307.5 1100 297.5 1100 L 255.63 1100" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 248.63 1100 L 255.63 1096.5 L 255.63 1103.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="282.5" y="1070" width="155" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 153px; height: 1px; padding-top: 1085px; margin-left: 284px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">data indication with peer addr</div></div></div></foreignObject><text x="360" y="1088" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">data indication with peer ad...</text></switch></g><rect x="475" y="1208" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 250 1217.66 L 461.88 1217.66" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.88 1217.66 L 461.88 1221.16 L 461.88 1214.16 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="#FF0000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="329" y="1202" width="64" height="14" stroke-width="0"/><text x="359.79" y="1212.16">channel bind</text></g><path d="M 466.5 1278 L 261.62 1278" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 254.62 1278 L 261.62 1274.5 L 261.62 1281.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="339" y="1263" width="43" height="14" stroke-width="0"/><text x="359.71" y="1272.5">alloc rsp</text></g><rect x="475" y="1203" width="160" height="70" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1238px; margin-left: 555px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">在allocation channelBind 数组中<br />增加一项，<br />增加定时器（超时时间10min），<br />已存在则刷新。<br /><b>同时创建/刷新permission</b></div></div></div></foreignObject><text x="555" y="1241" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">在allocation channelBind 数组中...</text></switch></g><path d="M 0 760 L 780 760" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 10 1149 L 790 1149" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><a xlink:href="https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/p2p/base/turn_port.cc;l=1817"><rect x="75" y="1210" width="135" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 133px; height: 1px; padding-top: 1217px; margin-left: 77px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">SendChannelBindRequest</div></div></div></foreignObject><text x="77" y="1227" fill="#000000" font-family="Helvetica" font-size="10px">SendChannelBindRequest</text></switch></g></a><a xlink:href="https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/p2p/base/turn_port.cc;l=1732"><rect x="10" y="1280" width="220" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 218px; height: 1px; padding-top: 1287px; margin-left: 12px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">TurnChannelBindRequest::OnResponse<br />收到回包即准备下次刷新（超时时间减1分钟）</div></div></div></foreignObject><text x="12" y="1297" fill="#000000" font-family="Helvetica" font-size="10px">TurnChannelBindRequest::OnResponse...</text></switch></g></a><rect x="473.75" y="1380" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 248.75 1389.66 L 460.63 1389.66" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 467.63 1389.66 L 460.63 1393.16 L 460.63 1386.16 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="#000000" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="327" y="1374" width="65" height="14" stroke-width="0"/><text x="358.54" y="1384.16">channel data</text></g><path d="M 495.5 1450 L 661.38 1450" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 668.38 1450 L 661.38 1453.5 L 661.38 1446.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="475" y="1380" width="180" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1400px; margin-left: 565px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 9px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">查找是否有通道，<br />剥离协议头(4B)，转发原始数据给peer</div></div></div></foreignObject><text x="565" y="1403" fill="#000000" font-family="Helvetica" font-size="9px" text-anchor="middle">查找是否有通道，&#xa;剥离协议头(4B)，转发原始数据给peer</text></switch></g><rect x="475.25" y="1510" width="10" height="80" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 663.75 1520 L 544.25 1520 Q 534.25 1520 524.25 1520 L 514.25 1520 Q 504.25 1520 502.06 1520 L 499.87 1520" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 492.87 1520 L 499.87 1516.5 L 499.87 1523.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 467.25 1580 L 347.75 1580 Q 337.75 1580 327.75 1580 L 317.75 1580 Q 307.75 1580 297.75 1580 L 255.88 1580" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 248.88 1580 L 255.88 1576.5 L 255.88 1583.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="282.75" y="1550" width="155" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 153px; height: 1px; padding-top: 1565px; margin-left: 284px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">channel data</div></div></div></foreignObject><text x="360" y="1568" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">channel data</text></switch></g><a xlink:href="https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/p2p/base/turn_port.cc;l=1764"><rect x="107.5" y="780" width="130" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 128px; height: 1px; padding-top: 787px; margin-left: 110px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">TurnEntry构造函数中发送</div></div></div></foreignObject><text x="110" y="797" fill="#000000" font-family="Helvetica" font-size="10px">TurnEntry构造函数中发送</text></switch></g></a><a xlink:href="https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/p2p/base/turn_port.cc;l=1846"><rect x="20" y="840" width="220" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 218px; height: 1px; padding-top: 847px; margin-left: 22px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">TurnEntry::OnCreatePermissionSuccess<br />收到回包即准备下次刷新（超时时间减1分钟）,<br />除非channel已建立，就由channel bind刷新</div></div></div></foreignObject><text x="22" y="857" fill="#000000" font-family="Helvetica" font-size="10px">TurnEntry::OnCreatePermissionSuccess...</text></switch></g></a><rect x="483.75" y="1535" width="80" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1550px; margin-left: 524px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">packetHandler()<br />套上协议头转发</div></div></div></foreignObject><text x="524" y="1552" fill="#000000" font-family="Helvetica" font-size="8px" text-anchor="middle">packetHandler()...</text></switch></g><rect x="484" y="1054" width="80" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1069px; margin-left: 524px;"><div data-drawio-colors="color: #000000; " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">packetHandler()<br />套上协议头转发</div></div></div></foreignObject><text x="524" y="1071" fill="#000000" font-family="Helvetica" font-size="8px" text-anchor="middle">packetHandler()...</text></switch></g><rect x="485.25" y="315" width="140" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 335px; margin-left: 555px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">authenticateRequest()<br style="font-size: 10px;" />return CodeUnauthorized</div></div></div></foreignObject><text x="555" y="338" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">authenticateRequest()...</text></switch></g><a xlink:href="https://source.chromium.org/chromium/chromium/src/+/main:third_party/webrtc/p2p/base/turn_port.cc;l=1397"><rect x="87.5" y="551" width="150" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 566px; margin-left: 163px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 10px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">端上处理，准备下次心跳保活</div></div></div></foreignObject><text x="163" y="569" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="10px" text-anchor="middle">端上处理，准备下次心跳保活</text></switch></g></a></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>